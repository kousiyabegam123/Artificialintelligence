# First, install the library:
# pip install google-cloud-translate

# Then, set up your authentication.
# For example, by setting the GOOGLE_APPLICATION_CREDENTIALS environment variable.

from google.cloud import translate_v2 as translate

def translate_text(text, target_language, source_language=None):
    """Translates text into the target language.

    Args:
        text: The text to translate.
        target_language: The language code to translate the text to (e.g., 'es').
        source_language: The language code of the original text (e.g., 'en').
                         If None, the API will auto-detect the source language.

    Returns:
        The translated text.
    """
    translate_client = translate.Client()

    if isinstance(text, bytes):
        text = text.decode("utf-8")

    result = translate_client.translate(
        text,
        target_language=target_language,
        source_language=source_language,
    )

    print(f"Text: {result['input']}")
    print(f"Translation: {result['translatedText']}")
    print(f"Detected source language: {result['detectedSourceLanguage']}")

    return result['translatedText']

# --- Example Usage ---
if __name__ == '__main__':
    # Translate a single phrase
    translated_phrase = translate_text("Hello, world!", "fr")  # Translate to French
    print(f"Translated to French: {translated_phrase}")

    # The API can auto-detect the source language
    translated_phrase_spanish = translate_text("Bonjour le monde", "es")  # Translate French to Spanish
    print(f"Translated to Spanish: {translated_phrase_spanish}")
